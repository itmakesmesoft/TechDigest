#!/bin/sh

FORBIDDEN_HTTPS_URL="https://github.com/itmakesmesoft/TechDigest.git" # ë ˆí¬ https url
FORBIDDEN_SSH_URL="git@github.com:itmakesmesoft/TechDigest.git" # ë ˆí¬ ssh url
FORBIDDEN_REF="refs/heads/main"

remote="$1"
url="$2"

if [ "$url" != "$FORBIDDEN_HTTPS_URL" -a "$url" != "$FORBIDDEN_SSH_URL" ]
then
    echo "forked branch can push your commits"
    exit 0 # Forked Project ì—ì„œëŠ” ì œí•œí•˜ì§€ ì•ŠìŒ
fi

if read local_ref local_sha remote_ref remote_sha
then
    if [ "$remote_ref" == "$FORBIDDEN_REF" ]
    then
        echo "ğŸ”´ main ë¸Œëœì¹˜ë¡œ ì§ì ‘ push í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤"
        echo "ğŸŸ¢ ë³„ë„ì˜ ë¸Œëœì¹˜ë¡œ push í›„ PR í•´ì£¼ì„¸ìš”"
        exit 1 # ê¸ˆì§€ëœ ref ë¡œ push ë¥¼ ì‹¤í–‰í•˜ë©´ ì—ëŸ¬
    fi
fi

exit 0